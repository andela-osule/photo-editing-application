{% load cloudinary %}
{% load static %}
{% include 'app/header.html' %}
<body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <div class="app container">
            <div class="row bg-white pane-top"> <!-- top pane -->
                <div class="col-sm-4">
                    <h1>Photo Editr</h1>
                </div>
                <div class="col-sm-8">
                    <div class="text-small profile-box"><!-- profile box  -->
	                    <p class="text-right">
	                    <img class="img-circle" src="{{request.user.profile_url}}"/>
	                    Logged in as {{ request.user.name }}, <a href="{% url 'app.auth.logout' %}">Logout</a></p>
                    </div><!-- profile box -->
                </div>
            </div> <!-- top pane -->

            <div class="row" ng-controller="PhotosCtrl">
                <div class="col-sm-3 bg-white img-rack-wrapper"> <!-- image selection pane -->
                    <div class="img-rack text-center"><!-- image rack -->
                        <div class="row img-item img-bottom-padding" ng-repeat="photo in photos" data-id="[[photo.id]]" data-filesrc="[[ photo.src ]]" select-photo>
                    </div>
                    <div ng-hide="photos.length">No images have been uploaded yet</div>
                        <!--Partials::selection.html-->
                    </div><!-- image rack -->
                    <div class="text-center" ng-controller="PhotoCtrl">
                        <form class="hidden" method="POST" enctype="multipart/form-data">
                            <input name="image" ngf-select ng-model="file" type="file" />
                        </form>
                        <div ngf-select="upload($files)"  class="btn btn-primary"><span class="fa fa-upload"></span> Upload image</div>
                    </div>
                </div> <!-- image selection pane -->

                <div class="col-sm-9 img-editing-pane"> <!-- image editing pane -->
                    <div class="row"><!-- image editing toolbox -->
                         <div class="col-sm-3 zero-padding">
                            <a class="btn btn-tool fa fa-pencil" edit-photo></a>
                            <a class="btn btn-tool fa fa-trash" delete-photo></a>
                         </div>
                         <div class="col-sm-9 zero-padding">
                                <div class="alert alert-[[ message.tags ]]" ng-repeat="message in messages">
                                <a ng-click="DestroyeAlert()" class="close" data-dismiss="alert">×</a>
                                    [[ message.text ]]
                                </div>
                            {% block messages %}
                                {% if messages %}
                                    {% for message in messages %}
                                        <div class="alert alert-{{ message.tags }}">
                                            <a class="close" data-dismiss="alert">×</a>
                                            {{ message|safe }}
                                        </div>
                                    {% endfor %}
                                {% endif %}
                            {% endblock %}
                         </div>
                    </div><!-- image editing toolbox -->

                    <div class="row"><!-- image editing canvas -->
                        <div class="img-editing-canvas">
                            <div class="bg-white text-center relative">
                                <img id="photo" class="absolute-fifth"/>
                            </div>
                        </div>
                    </div><!-- image editing canvas -->

                    <div class="row"><!-- image effects and filters selection pane -->
                        <div class="img-fx">
                            <div class="bg-white">
                            </div>
                        </div>
                    </div><!-- image effects and filters selection pane -->

                </div> <!-- image effects and filters selection pane -->
            </div>
        </div>

        <script src="{% static 'bower_components/jquery/dist/jquery.min.js' %}"></script>
        <script src="{% static 'bower_components/bootstrap/dist/js/bootstrap.min.js' %}"></script>
        <script src="{% static 'bower_components/angular/angular.min.js' %}"></script>
        <script src="{% static 'bower_components/moment/min/moment.min.js' %}"></script>
        <script src="{% static 'bower_components/ng-file-upload/ng-file-upload.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-moment/angular-moment.min.js' %}"></script>
        <script src="{% static 'bower_components/angular-animate/angular-animate.min.js' %}"></script>
        <script src="{% static 'js/plugins.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>
        <script src="{% static 'js/app.js' %}"></script>
    </body>
</html>
